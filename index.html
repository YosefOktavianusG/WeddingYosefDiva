<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Yosef & Diva Wedding</title>
    <link rel="icon" type="image/jpg" href="img/gallery-x.JPG">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alex+Brush&family=Cinzel:wght@400..900&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Light Gallery -->
    <!-- CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css"
    />

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/zoom/lg-zoom.umd.min.js"></script>
    
    <!-- SimplyCountdown -->
    <link rel="stylesheet" href="countdown/simplyCountdown.theme.default.css" />
    <script src="countdown/simplyCountdown.js"></script>

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <section
      id="landing"
      class="landing w-100 h-100 p-3 mx-auto text-center d-flex justify-content-center align-items-center"
    >
      <main>
        <h2>The Wedding Of</h2>
        <h1>Yosef<br />&<br />Diva</h1>
        <br /><br /><br /><br />
        <h4>Dear</br><span>X</span></h4>
        <a href="#home" class="btn btn-lg mt-4" onClick="enableScroll()">Open Invitation</a>
      </main>
    </section>

    <section id="home" class="home d-flex flex-column">
      <div class="container d-flex flex-column flex-grow-1">
        <div class="row justify-content-center align-items-end flex-grow-1">
          <div class="col-md-8 text-center text-white p-3">
            <h3>
              So then, they are no longer two but one flesh. 
              <br>
              Therefore what God has joined together, let not man separate.
              <br>
              <b>- Matthew 19:6 -</b>
            </h3>
          </div>
        </div>
      </div>
    </section>

    <section id="groom-bride" class="groom-bride">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 text-center">
            <h2>Groom & Bride</h2>
          </div>
        </div>
        <div class="row couple">
          <div class="col-lg-6">
            <div class="row">
              <div class="col-12 position-relative text-center">
                <div class="photo-wrapper">
                  <img 
                    src="img/groom.JPG" 
                    alt="Groom" 
                    loading="lazy" 
                    class="card-photo shadow"
                  >
                  <div class="groom-text">
                    <h3>Yosef Oktavianus Gunawan</h3>
                    <p>
                      Son of<br>
                      Mr. Kwa Kim Swan <br>
                      & <br>
                      Mrs. Tjoe Sun Kiauw
                    </p>
                    <a href="https://www.instagram.com/yosefoktavianus/"><i class="bi bi-instagram"></i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="row">
              <div class="col-12 position-relative text-center">
                <div class="photo-wrapper">
                  <img src="img/bride.JPG" 
                        alt="Bride" 
                        loading="lazy" 
                        class="card-photo shadow"
                  >
                  <div class="bride-text">
                    <h3>Rebecca Laurensia Diva</h3>
                    <p>
                      Eldest Daughter of<br />
                      Mr. James Subiyanto Halim <br />
                      & <br />
                      Mrs. Eunike Listya Hastuti
                    </p>
                    <a href="https://www.instagram.com/laurensiadiva/"><i class="bi bi-instagram"></i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="info" class="info">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center">
            <h2>Wedding Day</h2>
            <p class="description">
              Warmly request the honor of your presence to rejoice and celebrate with us as we place our love and future in His hands.
            </p>
          </div>
        </div>
        <div class="my-countdown simply-countdown"></div>
        <div class="row justify-content-center mt-4">
          <div class="col-md-5 col-10">
            <div class="card text-center text-bg-light mb-5">
              <h5 class="card-header">Holy Matrimony</h5>
              <div class="card-body">
                <div class="row justify-content-center">
                  <div class="col-md-6">
                    <i class="bi bi-clock d-block"></i>
                    <span>09.00 - End</span>
                  </div>
                  <div class="col-md-6">
                    <i class="bi bi-calendar3 d-block"></i>
                    <span>Saturday, 30 May 2026</span>
                  </div>
                </div>
              </div>
              <div class="card-footer"> 
                <br />
                PD Ecclesia Pillar <br />
                Jl Windu No 16 <br/>
                <a
                  href="https://maps.app.goo.gl/2ryBN5x57cqD4ToP7"
                  target="_blank"
                  class="btn btn-light btn-sm my-3"
                  >View Maps</a
                >
              </div>
            </div>
          </div>

          <div class="col-md-5 col-10">
            <div class="card text-center text-bg-light">
              <h5 class="card-header">Reception</h5>
              <div class="card-body">
                <div class="row justify-content-center">
                  <div class="col-md-6">
                    <i class="bi bi-clock d-block"></i>
                    <span>18.00 - End</span>
                  </div>
                  <div class="col-md-6">
                    <i class="bi bi-calendar3 d-block"></i>
                    <span>Saturday, 30 May 2026</span>
                  </div>
                </div>
              </div>
              <div class="card-footer">
                Royal Dynasty Restaurant <br />
                Gedung Graha Sudirman, Jl. Jend. Sudirman No.232A Lt.1, Kb. Jeruk, Kec. Andir, Kota Bandung, Jawa Barat 40181 <br />
                <a
                  href="https://maps.app.goo.gl/VTuQcFMotbfvXp2X8"
                  target="_blank"
                  class="btn btn-light btn-sm my-3"
                  >View Maps</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="gallery" class="gallery">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center">
            <h2>Our Gallery</h2>
          </div>
        </div>

        <div
          class="row row-cols-12 justify-content-center"
        >
          <div id="gallery-container" class="gallery-container">
            <a
              id="main-photo-link"
              href="img/gallery-1.JPG"
              data-title="Foto 1"
            >
              <img id="main-photo" src="img/gallery-1.JPG" alt="Foto 1" loading="lazy">
            </a>

            <!-- Tombol navigasi -->
            <button class="nav-btn prev-btn" id="prevBtn">&#10094;</button>
            <button class="nav-btn next-btn" id="nextBtn">&#10095;</button>
          </div>
        </div>
      </div>
    </section>

    <section id="rsvp" class="rsvp">
      <div class="container">
        <div class="row justify-content-center" style="margin-bottom: 5rem;">
          <div class="col-md-8 col-10 text-center">
            <h2>RSVP</h2>
            <p>Please confirm your attendance before,</p>
            <h5>May 23th, 2026</h5>
          </div>
        </div>

        <form
          id="my-form"
          class="row g-3 justify-content-center"
          method="POST"
          action="https://script.google.com/macros/s/AKfycbwQUt1hFsYWMLcIM37CcEUWa_V0M4LvS_gfWTXqbKDqiEqFSfiRPcRBaYpJjswq_ro/exec"
        >
          <div class="row">
            <div class="col-12 col-md-6 mx-auto">
              <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="name" />
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mx-auto">
              <div class="mb-3">
                <label for="guest" class="form-label">Number Of Guest</label>
                <select name="guest" id="guest" class="form-select">
                  <option disabled selected hidden value="">Number Of Guest</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mx-auto">
              <div class="mb-3">
                <label for="attendance" class="form-label">Confirmation Of Attendance</label>
                <select name="attendance" id="attendance" class="form-select">
                  <option disabled selected hidden value="">Confirmation Of Attendance</option>
                  <option value="Attend">Attend</option>
                  <option value="Not Attend">Not Attend</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mx-auto">
              <div class="mb-3">
                <label for="event" class="form-label">Event</label>
                <select name="event" id="event" class="form-select">
                  <option disabled selected hidden value="">Event</option>
                  <option value="Holy Matrimony">Holy Matrimony</option>
                  <option value="Reception">Reception</option>
                  <option value="Attend All">Attend All</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mx-auto">
              <div class="mb-3">
                <label for="wishes" class="form-label">Write Your Wishes</label>
                <textarea class="form-control" id="wishes" name="wishes" rows="5"></textarea>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-6 mx-auto" style="margin-top: 35px;">
              <button class="btn btn-primary">Send</button>
            </div>
          </div>
        </form>

        <div class="container py-5 col-md-8">
          <!-- <h2 class="text-center mb-4">Ucapan dari Tamu Undangan</h2> -->
          <div id="wish-list" class="row justify-content-center">
            <div class="col-lg-8">
              <div class="text-center text-secondary py-4" id="loading">Memuat ucapan...</div>
            </div>
          </div>
          <div id="pagination" class="mt-3 text-center"></div>
        </div>
      </div>
    </section>

    <section id="gifts" class="gifts">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-10 text-center">
            <h2>Wedding Gift</h2>
            <p>
              Your presence and prayers are the greatest wedding gifts we could ever ask for. 
              No other gifts are needed nor expected. 
              However, if giving is a sign of love, we are happy to receive it, and, of course, it will enhance our happiness even more.
            </p>
          </div>
        </div>

        <div class="row justify-content-center text-center">
          <div class="col-md-6">
            <img src="img/logo-bca.png" 
                class="img-fluid" 
            >
            <h4>
              1234567890
            </h4>
            <h4>
              Yosef Oktavianus & Laurensia Diva
            </h4>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="row">
          <div class="col text-center">
            <small class="block"
              >&copy; 2026 YoDiva Wedding. All Rights Reserved</small
            >
            <small class="block"
              >Design By
              <a href="https://instagram/yosefoktavianus">
                @yosefoktavianus</a
              ></small
            >
          </div>
        </div>
      </div>
    </footer>

    <div id="audio-container">
      <audio 
        id="bg-music" 
        loop 
        oncontextmenu="return false;" 
        controlsList="nodownload nofullscreen"
      >
        <source src="music/The Moment.mp3" type="audio/mp3" />
      </audio>

      <div class="audio-icon-wrapper" style="display: none">
        <i class="bi bi-disc"></i>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Script Countdown -->
    <script>
      simplyCountdown(".my-countdown", {
        year: 2026, // Target year (required)
        month: 5, // Target month [1-12] (required)
        day: 30, // Target day [1-31] (required)
        hours: 0, // Target hour [0-23], default: 0
        minutes: 0, // Target minute [0-59], default: 0
        seconds: 0, // Target second [0-59], default: 0
        words: {
          // Custom labels, with lambda for plurals
          days: {
            root: "day",
            lambda: (root, n) => (n > 1 ? root + "s" : root),
          },
          hours: {
            root: "hour",
            lambda: (root, n) => (n > 1 ? root + "s" : root),
          },
          minutes: {
            root: "minute",
            lambda: (root, n) => (n > 1 ? root + "s" : root),
          },
          seconds: {
            root: "second",
            lambda: (root, n) => (n > 1 ? root + "s" : root),
          },
        },
        plural: true, // Use plurals for labels
        inline: false, // Inline format: e.g., "24 days, 4 hours, 2 minutes"
        inlineSeparator: ", ", // Separator for inline format, default: ", "
        inlineClass: "simply-countdown-inline", // CSS class for inline countdown
        enableUtc: false, // Use UTC time if true
        onEnd: function () {}, // Callback when countdown ends
        refresh: 1000, // Refresh interval in ms, default: 1000
        sectionClass: "simply-section", // CSS class for each countdown section
        amountClass: "simply-amount", // CSS class for numeric values
        wordClass: "simply-word", // CSS class for unit labels
        zeroPad: false, // Pad numbers with leading zero
        removeZeroUnits: false, // Remove units with zero value
        countUp: false, // Count up after reaching zero
      });
    </script>

    <!-- Light Gallery -->
    <script>
      // Daftar gambar
      const photos = [
        { src: 'img/gallery-1.JPG', thumb: 'img/gallery-1.JPG', subHtml: 'Foto 1' },
        { src: 'img/gallery-2.JPG', thumb: 'img/gallery-2.JPG', subHtml: 'Foto 2' },
        { src: 'img/gallery-3.JPG', thumb: 'img/gallery-3.JPG', subHtml: 'Foto 3' },
        { src: 'img/gallery-4.JPG', thumb: 'img/gallery-4.JPG', subHtml: 'Foto 4' },
        { src: 'img/gallery-5.JPG', thumb: 'img/gallery-5.JPG', subHtml: 'Foto 5' },
        { src: 'img/gallery-6.JPG', thumb: 'img/gallery-6.JPG', subHtml: 'Foto 6' }
      ];

      let index = 0;
      const mainImg = document.getElementById('main-photo');
      const mainLink = document.getElementById('main-photo-link');
      const nextBtn = document.getElementById('nextBtn');
      const prevBtn = document.getElementById('prevBtn');
      const galleryContainer = document.getElementById('gallery-container');

      function showImage(i) {
        mainImg.style.opacity = 0;
        setTimeout(() => {
          mainImg.src = photos[i].src;
          mainLink.setAttribute('data-index', i);
          mainImg.style.opacity = 1;
        }, 400);
      }

      function nextImage() {
        index = (index + 1) % photos.length;
        showImage(index);
      }

      function prevImage() {
        index = (index - 1 + photos.length) % photos.length;
        showImage(index);
      }

      // Event tombol
      nextBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        nextImage();
        resetAutoSlide();
      });

      prevBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        prevImage();
        resetAutoSlide();
      });

      // Auto-slide
      let autoSlide = setInterval(nextImage, 3000);

      function resetAutoSlide() {
        clearInterval(autoSlide);
        autoSlide = setInterval(nextImage, 3000);
      }

      let galleryInstance = null;
      mainLink.addEventListener('click', (e) => {
        e.preventDefault();
        const currentIndex = parseInt(mainLink.getAttribute('data-index')) || 0;
        
        // Hancurkan instance sebelumnya jika masih aktif
        if (galleryInstance) galleryInstance.destroy();
        
        galleryInstance = lightGallery(galleryContainer, {
          dynamic: true,
          dynamicEl: photos,
          index: currentIndex,
          plugins: [lgZoom, lgThumbnail],
          speed: 500,
        });

        // buka langsung lightbox
        galleryInstance.openGallery(currentIndex);
      });
    </script>

    <!-- Script Adjust Height -->
    <script>
      function adjustHeight() {
        document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
      }
      window.addEventListener('resize', adjustHeight);
      adjustHeight();
    </script>

    <!-- Script Audio -->
    <script>
      const rootElement = document.querySelector(":root");
      const bgMusic = document.querySelector("#bg-music");
      const audioIconWrapper = document.querySelector(".audio-icon-wrapper");
      const audioIcon = document.querySelector(".audio-icon-wrapper i");
      const isPlaying = false;

      function disableScroll() {
        scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

        window.onscroll = function () {
          window.scrollTo(screenTop, screenLeft);
        };

        rootElement.style.scrollBehavior = "auto";
      }

      function enableScroll() {
        window.onscroll = function () {};

        rootElement.style.scrollBehavior = "smooth";
        // localStorage.setItem("opened", "true");
        playAudio();
      }

      function playAudio() {
        audioIconWrapper.style.display = "flex";
        isPLaying = true;
        bgMusic.play();
      }

      audioIconWrapper.onclick = function () {
        if (isPLaying) {
          bgMusic.pause();
          audioIcon.classList.remove("bi-disc");
          audioIcon.classList.add("bi-pause-circle");
        } else {
          bgMusic.play();
          audioIcon.classList.remove("bi-pause-circle");
          audioIcon.classList.add("bi-disc");
        }

        isPLaying = !isPLaying;
      };

      // if (!localStorage.getItem("opened")) {
      //  disableScroll();
      // }
      disableScroll();

      // tambahan: cegah klik kanan di area halaman (opsional)
      document.addEventListener('contextmenu', function(e){
        // jika ingin hanya blok klik kanan di atas audio:
        if (e.target.closest('audio')) e.preventDefault();
        // untuk blok seluruh halaman, pakai: e.preventDefault();
      });

      // Ketika tab menjadi aktif
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible') {
          // Lanjutkan jika tab aktif
          if (bgMusic.paused) bgMusic.play().catch(() => {});
        } else {
          // Pause jika tab tidak aktif
          bgMusic.pause();
        }
      });
    </script>

    <!-- Script Nama -->
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const name = urlParams.get("n") || "";

      const nameContainer = document.querySelector(".landing main h4 span");
      nameContainer.innerText = `${name}`.replace(/ , $/, ",");

      document.querySelector("#name").value = name;
    </script>

    <!-- Script Wishes -->
    <script>
      const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT6cTktfTKC5JIV0WCBLQTEjnw_PgebNS-OKzsefQa_mDlAHAB0wkQByrSCfAMBCC0mpR50NqzWHxh6/pub?gid=0&single=true&output=csv";

      const itemsPerPage = 5; // jumlah ucapan per halaman
      let wishesData = [];
      let currentPage = 1;

      async function loadWishes() {
        try {
          const res = await fetch(sheetUrl);
          const text = await res.text();
          const rows = text.split('\n').map(r => r.split(','));

          const header = rows[0];
          const nameIndex = header.indexOf('name');
          const msgIndex = header.indexOf('wishes');
          const dateIndex = header.indexOf('tanggal');

          wishesData = rows.slice(1)
            .map(r => ({
              name: r[nameIndex]?.trim(),
              message: r[msgIndex]?.trim(),
              date: dateIndex >= 0 ? r[dateIndex]?.trim() : ''
            }))
            .filter(w => w.name && w.message)
            .reverse();

          document.getElementById('loading').style.display = 'none';
          renderPage(currentPage);
        } catch (err) {
          console.error('Gagal mengambil data:', err);
          document.getElementById('loading').textContent = 'Gagal memuat ucapan 😢';
        }
      }

      function renderPage(page) {
        const container = document.getElementById('wish-list').querySelector('.col-lg-8');
        container.innerHTML = '';

        const start = (page - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const pageData = wishesData.slice(start, end);

        pageData.forEach(({ name, message, date }) => {
          const card = document.createElement('div');
          card.className = 'wish-card border rounded p-3 mb-3';
          card.innerHTML = `
            <div class="wish-name fw-bold">${name}</div>
            <div class="wish-message mt-1">“${message}”</div>
            ${date ? `<div class="text-end text-muted small mt-2">${date}</div>` : ''}
          `;
          container.appendChild(card);
        });

        renderPagination();
      }

      function renderPagination() {
        const totalPages = Math.ceil(wishesData.length / itemsPerPage);
        const pagination = document.getElementById('pagination');
        pagination.innerHTML = '';

        // Tombol Prev
        const prevBtn = document.createElement('button');
        prevBtn.textContent = '⟨ Prev';
        prevBtn.disabled = currentPage === 1;
        prevBtn.onclick = () => {
          if (currentPage > 1) {
            currentPage--;
            renderPage(currentPage);
          }
        };
        pagination.appendChild(prevBtn);

        // Tombol angka halaman
        for (let i = 1; i <= totalPages; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          if (i === currentPage) btn.classList.add('active');
          btn.onclick = () => {
            currentPage = i;
            renderPage(currentPage);
          };
          pagination.appendChild(btn);
        }

        // Tombol Next
        const nextBtn = document.createElement('button');
        nextBtn.textContent = 'Next ⟩';
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.onclick = () => {
          if (currentPage < totalPages) {
            currentPage++;
            renderPage(currentPage);
          }
        };
        pagination.appendChild(nextBtn);
      }

      const form = document.getElementById("my-form");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const data = new FormData(form);
        const action = e.target.action;

        // Tambahkan tanggal otomatis (jika kolom tanggal ada)
        const now = new Date();
        const dateStr = `${String(now.getMonth() + 1).padStart(2, '0')}/${String(now.getDate()).padStart(2, '0')}/${now.getFullYear()}`;
        data.set('tanggal', dateStr);

        fetch(action, {
          method: "POST",
          body: data,
        }).then(() => {
          // 🔹 Tambah langsung ke list (tanpa reload)
          const newWish = {
            name: data.get('name'),
            message: data.get('wishes'),
            date: dateStr,
          };

          // Masukkan ke awal array agar tampil di atas
          wishesData.unshift(newWish);
          renderPage(1); // tampilkan ulang halaman pertama
          currentPage = 1;

          // Reset form
          form.reset();
        });
      });

      loadWishes();
    </script>

    <!-- Script Form RSVP -->
    <script>
      
    </script>
  </body>
</html>
